# 第六次作业

> 给出文法规则如下
>
> E->E+T|T
> T->TF|F
> F->F\*|P
> P->a|b
>
> 1. 对这个文法提取左公因子
> 2. 提取左公因子后，该文法能适用于自顶向下分析吗？
> 3. 提取左公因子后，从文法消除左递归
> 4. 得到的文法适用于自顶向下分析吗？

E->T{+T}
T->F{F}
F->P{\*}
P->a|b

不存在左递归，自然适用于自顶向下分析

提取左公因子后已经消除左递归了

同 2 问

> 解答如下问题
>
> 1. 构造一个不带回溯的自顶向下分析程序对文法有何要求 ？为什么？
> 2. 自顶向下分析不能处理左递归文法，但为什么能处理其他递归文法？

文法非左递归；文法的任一非终结符号，若其规则右部有多个选择(候选式)时，那么，各选择所推出的终结符号串的头符号集合要两两不相交

1. 不能处理左递归文法，因为左递归文法会导致无限循环
2. 为了避免回溯，就要保证当用非终结符 U 去匹配输人串时，它能够根据当时读人的符号准确地选用它的一个选择去执行任务

不会产生无限递归，因为首先选择的规则一定是非左递归的，而且每次选择的规则都是唯一的

> 有文法 G[Z]
>
> A::=(B)|dBe
> B::=c|Bc
>
> 试设计自顶向下的语法分析程序

首先消除左递归

A::=(B)|dBe
B::c{c}

```c
main:
begin
    nextsysm;
    A;
end;
procedure B;
if class='c' then
begin
    nextsysm; // 读取下一个字符
    while class='c' do nextsysm;
end;
else error;
procedure A;
if class='(' then
begin
    nextsysm;
    B;
    if class=')' then nextsysm else error;
end
else if class='d' then
begin
    nextsysm;
    B;
    if class='e' then nextsysm else error;
end
else error;
```

> 有文法 G[Z]
>
> Z::=AcB|Bd
> A::=AaB|c
> B::=aA|a
>
> 1. 试求各选择(候选式)的 FIRST 集合
> 2. 该文法是否可以采用自顶向下的语法分析方法 ？为什么？
> 3. 如果可以，试用递归下降分析法设计其语法分析程序。如果不可以，请改写文法，并写出其 递归下降分析程序

1. FIRST(B)={a} FIRST(A)={c} FIRST(Z)={a,c} FIRST(Bd)={a} FIRST(AcB)={c} FIRST(AaB)={c} FIRST(c)={c} FIRST(aA)={a} FIRST(a)={a}
2. 不能，因为文法具有左递归性
3. 改写文法
    1. Z::=AcB|Bd,A::=c{aB},B::=a{a}

```c
main:
begin
    getsym();
    Z;
end;
procedure Z:
begin
    if(sym=='c') then
    begin
        A;
        if(sym=='c') then
        begin
            getsym();
            B;
        end;
        else error;
    end;
    else if(sym=='a') then
    begin
        B;
        if(sym!='d') then error
        else getsym();
    end
    else error;
end;
procedure A:
begin
    if(sym=='c') then
    begin
        getsym();
        while(sym=='a') do getsym(),B;
    end;
    else error;
end;
procedure B:
begin
    if(sym!='a') then error;
    else
    begin
        getsym()
        if(sym=='c') then A;
    end;
end;
```
