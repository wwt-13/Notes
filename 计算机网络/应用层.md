# 应用层

## Telnet

> 非常古老的一个协议，早在 1969 年就被开发出来了
>
> 主要作用是远程登录，远程登录到设备上来对设备进行管理配置
>
> 现在已经很少有人使用 Telnet 这个协议了，因为 Telnet 协议在远程登录到其他设备的时候，很多都需要进行用户验证(需要输入自己的用户名和密码)，而在 Telnet 协议中，**用户名和密码是以明文的形式进行传输的**，该协议并没有对这些敏感的信息就行加密。
> 这就导致黑客可以很容易的通过抓包的手段直接嗅探到用户名和密码

![通过抓包获取到的密码](../assets/CleanShot%202023-05-13%20at%2009.13.32.png)

## SSH

> 较为安全的远端登录协议，数据在传输的时候是经过加密的

## FTP

> File Transfer Protocol 双端文件传输协议

## TFTP

> 类似 FTP 的文件传输协议，但是必须预先知道需要传输的文件名

![](../assets/CleanShot%202023-05-13%20at%2009.30.57.png)

## SNMP

> Simple NetWork Management Protocol 简易的网络管理协议
>
> 用于管理、监控大量的网络设备运行状态

有两种方式对网络设备进行查询

1. Polling: 想查看某网络设备的时候，网络管理器向网络设备发送查询请求
2. Trap: 与 Polling 相反，是网络设备自动向网络管理器发送信息

![](../assets/CleanShot%202023-05-13%20at%2009.36.46.png)

[这是一个使用 SNMP 软件的 DEMO](https://hco.demo.solarwinds.com/Orion/SummaryView.aspx?viewkey=Summary+Home+Narrow)

## DNS

> 域名解析协议

了解根服务器信息: https://root-servers.org/

## HTTP

> 超文本传输协议，但是是明文传输，和 telnet 一样是未经过加密的

## HTTPS

> 超文本传输协议，但是传输内容经过 SSL/TLS 加密

## NTP

> 时间同步协议

## DHCP

> DHCP（Dynamic Host Configuration Protocol）是一种网络协议，用于自动分配 IP 地址、子网掩码、默认网关、DNS 服务器等网络参数。DHCP 协议的主要目的是简化网络管理员的工作，减少手动配置 IP 地址等信息的工作量，并避免重复配置和错误配置带来的问题。
>
> 在使用 DHCP 协议的网络环境中，客户端设备无需手动设置自己的 IP 地址等网络参数，而是通过 DHCP 服务器向其分配这些参数。DHCP 服务器会在一个预定义的地址池中分配可用的 IP 地址，并将这些地址以租赁方式分配给客户端设备，租期通常是几小时或几天。当租期到期时，客户端设备需要重新向 DHCP 服务器请求获得新的 IP 地址等网络参数。

需要注意一下 DHCP 分配 IP 的流程，并不是得到请求后就直接分配的
![](../assets/CleanShot%202023-05-13%20at%2010.44.25.png)

### BootP

> BootP（Bootstrap Protocol）是一种用于网络设备引导的网络协议，主要用于自动获取 IP 地址和引导文件等信息。BootP 协议在 DHCP（Dynamic Host Configuration Protocol）出现之前曾经广泛使用。
>
> 在使用 BootP 协议的网络环境中，当一台新设备接入网络时，它首先会向网络发送一个 BootP 请求消息，请求获取自己的 IP 地址和引导文件等信息。接收到这个请求消息的 BootP 服务器会根据设备的 MAC 地址分配一个可用的 IP 地址，并将这个 IP 地址和引导文件等信息以应答消息的形式返回给设备，设备收到应答消息后就可以正常地工作了。
>
> _这个 MAC 地址是需要手动输入的，非常麻烦_
>
> 需要注意的是，BootP 协议并不提供动态更新 DNS 等服务的机制，因此在使用 BootP 协议的网络环境中，网络管理员需要手动为设备配置 DNS 服务器等信息，或采用其他机制进行管理。
>
> 总之，BootP 协议是一种早期的网络协议，用于网络设备的引导，主要功能是自动获取 IP 地址和引导文件等信息，已被 DHCP 协议所取代

### APIPA

> 但是如果 DHCP 服务器出问题了咋办捏，是不是这台服务器负责的网络设备都没法联网了呢？
>
> 微软想到了一个解决方案：APIPA
>
> APIPA（Automatic Private IP Addressing）是一种用于在没有DHCP服务器的情况下自动分配IP地址的网络协议。当一个Windows计算机通过DHCP客户端无法获取到有效IP地址时，Windows操作系统将会自动启用APIPA协议，为计算机分配一个私有IP地址。
> 
> APIPA协议使用的IP地址范围为169.254.0.1到169.254.255.254，子网掩码为255.255.0.0。当计算机未能从DHCP服务器处获取到IP地址时，将会自动分配一个IP地址，并在本地网络内进行通信。由于该IP地址是私有地址，不与Internet上真实存在的IP地址冲突，因此可以保证本地网络内的通信正常进行。
> 
> 需要注意的是，由于APIPA协议只适用于在没有DHCP服务器的局域网内使用，因此不应该作为长期的IP地址分配方式。一旦出现DHCP服务器故障或网络连接故障被恢复，计算机应尽快切换回使用DHCP协议获取IP地址。
> 
> 总之，APIPA协议是一种用于在没有DHCP服务器的情况下自动分配IP地址的网络协议，可以保证在局域网内的通信正常进行，但不应作为长期的IP地址分配方式使用。