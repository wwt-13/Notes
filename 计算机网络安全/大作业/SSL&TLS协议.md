[toc]

# SSL&TLS协议

>   计算机网络的`OSI`七层模型和`TCP/IP`四层模型想必大家都知道。其中`SSL/TLS`是一种介与于传输层（比如`TCP/IP`）和应用层（比如`HTTP`）的协议。*它通过"握手协议`(Handshake Protocol)`"和"传输协议`(Record Protocol)`"来解决传输安全的问题*。<u>`SSL/TLS`是一个可选层，没有它，使用`HTTP`也可以通信，它存在的目的就是为了解决安全问题</u>，这也就是`HTTPS`相对于`HTTP`的精髓所在。

## SSL&TLS运行过程

>   SSL/TLS有两个阶段，**握手协议**和**传输协议**
>
>   1.   握手协议：就是建立起连接的过程，这个阶段采用**非对称加密**，这个过程完毕后会生成一个<u>*对话密钥*</u>
>   2.   传输协议：就是用这个<u>*对话秘钥*</u>使用对称加密进行传输
>
>   之所以这样做，是因为非对称加密是很耗时的，而握手协议中使用数字证书保证了公钥传输的安全性，这样在传输协议中就可以直接使用对称加密了

![img](/Users/wwt13/Documents/Notes/assets/webp)

1.   客户端发出请求（Client Hello）：这一步主要向服务端传递一下信息

     -   支持的`SSL/TLS`协议版本
     -   支持的加密套件列表`(cipher suite)`
     -   支持的压缩算法列表`(compression methods)`，用于后续的压缩传输
     -   产生的一个随机数`random_C(random number)`，客户端有存留，稍后用于生成`"对话密钥(session key)"`

2.   服务端回应（Server Hello）：收到客户端的请求之后，服务端向客户端回应以下信息

     -   根据客户端支持的`SSL/TLS`协议版本，和自己的比较确定使用的`SSL/TLS`协议版本，如果没有合适的，对话关闭

     -   回应加密套件，压缩算法

     -   产生的一个随机数`random_S(random number)`，服务端有存留，稍后用于生成`"对话密钥(session key)"`

     -   服务端数字证书(证明自己的身份，传递公钥)

         如果需要验证客户端，发出请求，要求客户端提供证书