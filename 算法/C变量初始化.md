[toc]

# C变量初始化

>    **[变量](https://haicoder.net/c/c-variable.html)** 的初始化就是在定义变量的同时，给变量设置一个初始值，在 **[C 语言](https://haicoder.net/c/c-tutorial.html)** 中，如果定义变量没有初始化，那么变量有可能会被赋值也有可能不会赋值。
>
>   如果是定义的 **[全局变量](https://haicoder.net/c/c-variable-scope.html)** 或者 **[静态变量](https://haicoder.net/c/c-variable.html)**，未初始化的话就是 0，如果是局部变量，那就是以前残留在堆栈里的随机值。

## C变量的作用域

>   要理解全局变量、局部变量、静态变量等等概念，首先要理解的就是C变量的作用域。
>
>   所谓**作用域（Scope）**，就是变量的有效范围，就是变量可以在哪个范围以内使用。有些变量可以在<u>所有代码文件中使用</u>，有些变量<u>只能在当前的文件中使用</u>，有些变量<u>只能在函数内部使用</u>，有些变量只能在 [for 循环](http://c.biancheng.net/view/172.html)内部使用，C语言变量作用域可分为**局部作用域**和**全局作用域**
>
>   *<font color="red">Attention:</font>变量的作用域由变量的定义位置决定，在不同位置定义的变量，它的作用域是不一样的。*

### 局部作用域

>   局部作用域包括一下几个部分：
>
>   -   函数内部定义的变量
>   -   函数传入的参数
>   -   语句块内部定义的变量
>   
>   只能在该函数或语句块内部的语句使用

### 全局作用域

>   全局作用域包括以下两部分
>
>   -   在所有函数外部定义变量
>   -   在头文件中定义的变量
>
>   全局变量在整个程序生命周期内都是有效的，在定义位置之后的任意函数中都能访问。

```c
#include<stdio.h>//头文件中定义的是全局变量
int global;//函数外部定义的是全局变量
int sum(int a,int b){//函数参数是局部变量
    int c;//函数内部定义的变量是局部变量
    c=a+b;
    return c;
}
int main(){
    int in1,in2;//函数内部定义的变量是局部变量
    scanf("%d %d",&in1,&in2);
    int sum=sum(in1,in2);
    printf("%d\n",sum);
    return;
}
```

---

首先给出结论：在c语言中，局部变量为初始化的话会被系统赋予随机值，而全局变量未初始化的话则会被置为NULL（所有位均赋0）

![CleanShot 2022-08-17 at 10.56.42](/Users/wwt13/Documents/Notes/assets/CleanShot 2022-08-17 at 10.56.42.gif)

*但是为什么会这样呢？*

首先，`int i;`运行的结果是**将变量 i 和内存中的某一个单元产生关联**。然后变量 i 就代表那个内存单元了，要想操作该内存单元只需要通过变量i就可以了。

其次，内存条是一个硬件设备，硬件设备里面要么是 0 要么是 1，所以变量`i`关联的内存单元内也一定是类似于$0010\ 1011\ 0011\ ....$这类代码。

 `i `单元虽然没有给它赋值，但<u>*这个空间在之前可能被其他软件使用过*</u>。比如放电影的时候将电影中的某一部分数据放到了这个单元中。电影看完之后一关闭，这个单元空间就释放了，即操作系统就会***回收***该内存空间，以便分配给其他软件使用。

*<font color="orange">Tip:</font>操作系统在回收的时候不会对该空间进行任何操作，只是会将该空间的内存单元全部标记为空闲⚠️*

 这样的话就会出现一个问题：以前的软件如果使用过 i 这个空间的话，那么那些垃圾数据还在里面保留着，如果没有初始化，*<u>那么它里面就应该是一个随机的垃圾值</u>*。但是当我们多次执行的时候发现它不是一个随机的值，而是一个不变的值。这是为什么呢？这个值叫“填充数字”或叫“填充字”。

*<font color="green">Ps:</font>所以建议在C中定义局部变量的时候，最好顺手给他初始化以下，避免bug* 

**对于全局变量初始化相关的知识，需要等学习了操作系统之后才能进行完善**