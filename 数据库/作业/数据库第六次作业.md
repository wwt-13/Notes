# 数据库第六次作业

1. 数据库完整性（Database Integrity）是指数据库中数据在逻辑上的一致性、正确性、有效性和相容性

2. 数据完整性约束指的是为了防止不符合规范的数据进入数据库，在用户对数据进行插入、修改、删除等操作时，DBMS自动按照一定的约束条件对数据进行监测，使不符合规范的数据不能进入数据库，以确保数据库中存储的数据正确、有效、相容

3. 1.定义功能：提供定义完整性约束条件的机制

     2.检查功能：检查用户的操作是否符合完整性控制条件

     3.应急功能：一旦发现不符合语义的数据，则采取恰当操作。

4. 参照的完整性不允许关系中有不存在的实体引用。 参照完整性与实体完整性二者，皆是关系模型必须满足的完整性约束条件，其目的在于保证数据一致性

5. ```mysql
     create table test(
     	id int,
         age int check(age<60),
         d_id int,
         primary key(id),
         foreign key(d_id) references test2(id)
     );
     create table test2(
     	id int,
         primary key(id)
     )
     ```

6. 直接报错(不处理)

7. 在Male和Female表上各建立一个触发器，将来宾人数限制在50人以内。任选MySQL或OpenGauss数据库实现，提交触发器代码

     ```mysql
     create trigger male
     after insert on Male
     for each row
     begin
     	declare i int;
     	declare j int;
     	select count(*) from Male into i;
     	select count(*) from Female into j;
     	if(i+j>50) then
     		delete from Male where id=new.id;
     	end if;
     end;
     create trigger female
     after insert on Female
     for each row
     begin
     	declare i int;
     	declare j int;
     	select count(*) from Male into i;
     	select count(*) from Female into j;
     	if(i+j>50) then
     		delete from Female where id=new.id;
     	end if;
     end;
     ```

8. 什么是数据库安全性？

     数据库安全性是指保护数据库免受恶意攻击和未经授权的访问以及保护其中存储的数据的完整性、保密性和可用性的一组措施。它是数据库系统需要保证的最基本要求之一，特别是对于存储敏感信息的数据库而言，数据库安全性显得更为重要

9. <img src="/Users/wwt13/Documents/Notes/assets/CleanShot 2023-04-24 at 18.54.38.png" alt="CleanShot 2023-04-24 at 18.54.38" style="zoom:70%;" />

     ```sql
     # 1.授子用户 U1 对两个表的所有权限，并可给其他用户授权：
     GRANT ALL PRIVILEGES ON 学生, 班级 TO U1 WITH GRANT OPTION;
     # 2.授子用户 U2 对学生表具有查看权限，对家庭住址具有更新权限：
     GRANT SELECT ON 学生 TO U2;
     GRANT UPDATE (家庭住址) ON 学生 TO U2;
     # 3.将对班级表查看权限授子所有用户：
     GRANT SELECT ON 班级 TO PUBLIC;
     # 4.将对学生表的查询、更新权限授予角色R1：
     GRANT SELECT, UPDATE ON 学生 TO R1;
     # 5.将角色 R1授子用户 U1，并且U1可继续授权给其他角色：
     GRANT R1 TO U1 WITH ADMIN OPTION;
     ```

     