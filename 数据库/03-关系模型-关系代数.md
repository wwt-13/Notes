[toc]

# 关系模型-关系代数

> 关系代数包括内容
>
> 1. 关系代数基本操作：并$\cup$、差$-$、**积**$\times$、**选择**$\sigma$、**投影**$\Pi$
> 2. 关系代数扩展操作：交、$\theta$-**连接**、**自然连接**
> 3. 关系代数组合与应用训练
> 4. 关系代数复杂扩展操作：除、外连接
> 4. 书写关系代数的基本思维训练：“一个集合，施加一个操作得到一个集合，依次施加关系代数操作，进而得到所需的集合”==以集合为中心==

## 关系代数概述

> **基于集合**，提供的一系列关系代数操作：<u>并、差、笛卡尔积（广义积）、选择、投影、更名</u>等基本操作
>
> 以及<u>交、连接和关系</u>除等一系列拓展操作，这是一种集合思维的操作语言
>
> 还是举以前举的一个例子：$\Pi_{姓名,课程名}\Big(\sigma_{课程号=c2}\big(R\bowtie S\big)\Big)$
>
> 是一种抽象的语言，是学习其他数据库语言，比如SQL语言的基础。

## 关系代数基本操作

> 一般分为两类操作：==集合操作==和==纯关系操作==
>
> 复杂动作就是关系代数定义的各种基本动作的各种组合
>
> <img src="https://gitee.com/ababa-317/image/raw/master/images/5ccfe0e904c43b59a2d54b1075a5e6f.jpg" style="zoom:67%;" />

- 集合操作

  |             操作              | 集合1 | 集合2 |    示例     |
  | :---------------------------: | :---: | :---: | :---------: |
  |          UNION（并）          |   R   |   S   |  $R\cup S$  |
  |      INTERSECTION（交）       |   R   |   S   |  $R\cap S$  |
  |       DIFFERENCE（差）        |   R   |   S   |    $R-S$    |
  | Cartesian PRODECT（笛卡尔积） |   R   |   S   | $R\times S$ |

- 纯关系操作

  |      操作       | 集合1 | 集合2 |       示例        |
  | :-------------: | :---: | :---: | :---------------: |
  | PROJECT（投影） |   R   |       |   $\Pi_{A}(R)$    |
  | SELECT（选择）  |   R   |       | $\sigma_{Con}(R)$ |
  |  JOIN（连接）   |   R   |   S   |   $R\bowtie S$    |
  | DIVISION（除）  |   R   |   S   |     $R\div S$     |

## 关系代数的并相容性

> 某些关系代数操作，比如**并、差、交**等，需要满足“并相容性”

**并相容性**

- 参与运算的两个关系及其相关属性之间有一定的对应性、可比性或意义关联性

  关系R和关系S存在相容性，当且仅当

  1. 关系R和关系S的**属性数目必须相同**
  1. 对于任意i，关系R的第i个属性和S的第i个**属性的域必须相同**
  
  假设$R(A_1,A_2...A_n),S(B_1,B_2,...B_m)$，关系R和关系S具有并相容性
  
  则$n=m \& Domain(A_i)=Domain(B_i)$

<u>并相容性示例</u>

$R=STUDENT(SID \ char(10),Sname\ char(8),Age\ char(3))$

$S=PROFESSOR(PID\ char(10),Pname\ char(8),Age\ char(3))$

1. 关系R和关系S的属性数目都是3
2. 关系R的属性SID与关系S的PID的域都是char(10)（char(10)是指存储10个字符，<u>但是这个为什么算是域？？？？</u>）
3. 关系R的属性Sname与关系S的Pname的域都是char(10)
4. 关系R的属性Age与关系S的Age的域都是char(10)

## 关系代数操作汇总

### 并

> ==和离散数学中的语义完全一致==

> 定义：假设关系R和关系S是并相容的，则关系R和关系S的并运算结果也是一个关系
>
> $R\cup S=由或者出现在关系R中，或者出现在S中的元组构成=\{t|t\in R\or t \in S\}$

**抽象并操作实例**

|      | $关系R$ |      |
| :--: | :-----: | :--: |
|  A1  |   A2    |  A3  |
|  a   |    b    |  c   |
|  a   |    d    |  g   |
|  f   |    b    |  e   |

|      | $关系R$ |      |
| :--: | :-----: | :--: |
|  B1  |   B2    |  B3  |
|  a   |    b    |  c   |
|  a   |    b    |  e   |
|  a   |    d    |  g   |
|  h   |    d    |  g   |

|      | $关系R\cup S$ |      |
| :--: | :-----------: | :--: |
|  C1  |      C2       |  C3  |
|  a   |       b       |  c   |
|  a   |       d       |  g   |
|  f   |       b       |  e   |
|  a   |       b       |  e   |
|  h   |       d       |  g   |

并操作实例2：实际的

$R(参加体育队的学生)\cup S(参加文艺队的学生)=R\cup S(参加体育队或者参加文艺队的学生)$

### 差

> ==同样和离散数学中的定义完全一致==
>
> $R-S=\{t|t\in R \and t\notin S\}$

###  广义积

> 关系R和关系S的广义笛卡尔积运算结果也是一个关系，其由关系R中的元组和关系S中的元组进行所有可能的拼接/串接构成
>
> 数学描述：$R\times S=\{<a_1,a_2,...a_n,b_1,b_2,...b_m>|<a_1,a_2,...a_n>\in R\and <b_1,b_2,...b_n>\in S\}$，属性个数相加，**元组个数相乘**

- 关系R的元组数目是3，度数是3，关系S的元组数目是4，度数是4，则$R\times S$的元组数目是12，度数是7

<img src="https://gitee.com/ababa-317/image/raw/master/images/c67853daebe28a8f3d1ef00790167fd.jpg" style="zoom:67%;" />

关于广义笛卡尔积的作用

- <u>当一个检索涉及到**多个表**的时候（比如说学生表和课程表），就需要将这些表串接起来，然后才能检索，这是就需要用到广义笛卡尔积运算</u>

  ![](https://gitee.com/ababa-317/image/raw/master/images/d13080ed95afb45855184a17fd3e0dd.jpg)

- *是学习后面各种连接运算的基础*

### 选择

### 投影

### 交

### theta连接

### 自然连接

### 除

### 外连接

