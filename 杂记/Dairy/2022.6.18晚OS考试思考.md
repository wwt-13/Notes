需要给User类添加State字段，表示该用户是否在线

如何实现好友添加功能（需要额外一个数据库，好友申请数据库）

1.  首先Client端发出addFriends申请
2.  然后服务端接受申请，并向好友申请数据库中写入对应申请请求（如果好友在线...如果好友不在线...）
3.  （好友申请还是单独安排一个位置比较好）

如何实现私聊功能

1.  首先Client端发出私聊申请（参数需要包括好友对应的id）

    

2.  私聊需要开启一个独立的界面

3.  1.  发送消息
    2.  发送文件

4.  服务端接收数据并进行处理，首先打开私聊界面的时候需要显示之前聊过的所有数据（包括对方发送的数据和自己发送的数据）

如何实现群聊功能（是否实现暂时待定......，和私聊功能比较类似，但是更加复杂）

1.  首先Client端发出群聊申请（需要提供群组id，如果要实现群聊的话还要实现加群、群邀请、退群等等一系列功能，更加复杂）





需要的功能实现

目前使用的六个数据库

-   保存用户数据的HashMap<id,User>userDate
-   保存用户聊天数据的HashMap<id,String[]>charDate
-   保存用户群聊参与人的HashMap<id,ArrayList[]>groupUsers
-   保存用户线程的HashMap<id,ServerThread>serverThreadPool
-   保存用户好友列表的HashMap<id,ArrayList<id>>userFriends
-   保存用户好友申请的HashMap<receiveId,HashMap<senderId,state>>userFriendRequests

1.   登录（登录成功+将用户置于登录状态，则创建用户线程并放入线程池）
     1.   查看好友
     2.   添加好友（需要好友id）
     3.   查看好友申请
     4.   同意好友申请
     5.   私聊（包括发消息，发文件等等）
     6.   群聊功能（包括群发消息）
     7.   退出登录（将用户线程移出线程池）
2.   注册
3.   退出系统